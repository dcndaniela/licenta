{% extends 'polls/base.html' %} <!--includ base.html -->

{% block main_content %}

<div class="container">
    <h2 class="text-center">All casted votes for election <a href="{%url 'polls:detail' poll.id %}" style="color:rosybrown">{{poll.election_title}} </a></h2>
    <br>
    <div class="row">
        <div class="col-sm-8 offset-sm-2">

            {% if messages %}
                   {% for message in messages %}
                              <div %} %} class="{{ message.tags }}" endif  if message.tags {% {%>
                                  {{ message }}
                                  <button aria-label="Close" class="close" data-dismiss="alert" type="button">
                                      <span aria-hidden="true">&times;</span>
                                    </button> <!-- adaug acest buton ca sa inchid mesajul de alerta -->
                              </div>
                   {% endfor %}
            {% endif %}

            <div style="text-align: center"> Currently are {{votes_number}} casted votes</div>
<br>
            <ul class="list-group">
                           {%for ab in audited_ballots%}
                                      <li class="list-group-item " style="background-color: lavender " >
                                          <p style="color: darkcyan">Vote hash: {{ab.vote_hash}}</p>
                                          <span>Added at: {{ab.added_at|date:"d-M-Y h:i:s A"}}</span>
                                      </li>
                           {%endfor%}
            </ul>

        </div>
    </div>
</div>



<!-- pentru paginare:-->
{% if audited_ballots.has_other_pages %}
  <ul class="pagination">
    {% if audited_ballots.has_previous %}
<!--      pun &{{params}} pt ca toate paginile sa fie sortate alfabetic at cand este selectat A-Z-->
      <li><a href="?page={{ audited_ballots.previous_page_number }}&{{params}}">&laquo;</a></li>
    {% else %}
      <li class="disabled"><span>&laquo;</span></li>
    {% endif %}

    {% for i in audited_ballots.paginator.page_range %}
      {% if audited_ballots.number == i %}
        <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
      {% else %}
        <li><a href="?page={{ i }}&{{params}}">{{ i }}</a></li>
      {% endif %}
    {% endfor %}

    {% if audited_ballots.has_next %}
      <li><a href="?page={{ audited_ballots.next_page_number }}&{{params}}">&raquo;</a></li>
    {% else %}
      <li class="disabled"><span>&raquo;</span></li>
    {% endif %}
  </ul>
{% endif %}

{% endblock %}

